**DAX Standards Rules**

Below table contains standards and best practices. All the DAX measures should validate against these standards. Code column is the standard way of writing code in Power BI DAX. 

| Rule Name                              | Explanation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Code                                                                                                                                                                                                                     |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Duplicated function                   | If a function is called with the same arguments within the same filter context, it returns the same value. However, the formula engine may perform redundant evaluations, resulting in additional CPU cost. A possible optimization is to store the result of a function call in a variable, and then reference the variable.                                                                                                                                       | `VAR _LastDate = LASTDATE ( 'Date'[Date] )`<br>`VAR _LastBalance = CALCULATE ( [Balance], _LastDate )`<br>`VAR _LastExpenses = CALCULATE ( [Amount], Account[Type] = "Expenses", _LastDate )`<br>`RETURN LastBalance - LastExpenses` |
| Function replace IFERROR/DIVIDE       | The IFERROR function catches any error, including conversion errors. When the expression is a division operator, the error that is more likely to happen is a division by zero. The DIVIDE function specifically manages the division by zero condition without intercepting any other error, resulting in faster execution time.                                                                                                                                       | `DIVIDE ( [Amount], [Quantity], 0 )`                                                                                                                                                                                     |
| Duplicated measure                    | Two measure references can return different results when executed in different filter contexts, but within the same filter context the result should be the same. However, the formula engine might perform redundant evaluations of the same expressions. A possible optimization is to store the result of a measure reference in a variable, and then reference the variable.                                                                                     | `VAR _quantity = [Sales Quantity]`<br>`VAR _amount = [Sales Amount]`<br>`RETURN IF ( _quantity > 0 && _amount > 0, _quantity / _amount )`                                                                                   |
| Materialized table filter argument    | A physical table or a table expression function based on a physical table was used as a table filter argument to functions such as CALCULATE, CALCULATETABLE, etc. Remove the Sales iterator and use KEEPFILTERS around the condition to maintain the same semantics, so the filter is applied only to the Sales[Unit Price] column specified in the predicate instead of using the entire Sales table.                                                | `CALCULATE ( [Sales Amount], KEEPFILTERS ( Sales[Unit Price] > 100 ) )`                                                                                                                                                   |
| Filtered table as filter argument     | A FILTER function filtering an entire table with a single column predicate is used as a filter argument in functions such as CALCULATE, CALCULATETABLE, etc. Remove the Sales iterator and use KEEPFILTERS around the condition to maintain the same semantics, so the filter is applied only to the Sales[Unit Price] column specified in the predicate instead of using the entire Sales table.                                                | `CALCULATE ( [Sales Amount], KEEPFILTERS ( Sales[Unit Price] > 100 ) )`                                                                                                                                                   |
| Blank comparison                      | BLANK is used for comparison in a binary operator where the operator is not strict equal to (==). Replace the = operator with == or use ISBLANK to get the right behavior and better performance.                                                                                                                                                                                                                                                       | `CALCULATE ( [Sales Amount], Product[Brand] == BLANK() )`<br>`CALCULATE ( [Sales Amount], ISBLANK ( Product[Brand] ) )`                                                                                                     |
| SWITCH cannot be reduced statically   | The SWITCH function cannot be optimized by applying static branch reduction to the query plan. To optimize the query plan, SWITCH should test the column that is directly filtered. For example, if a visible column is ordered by a hidden column, the SWITCH function should use the visible column and not the hidden column.                                                                                                                             | `SWITCH ( SELECTEDVALUE ( Metric[Name] ), "Revenue", [Sales Amount], "Cost", [Total Cost], "Margin", [Margin], BLANK() )`                                                                                                  |
| Context transition in iterator        | A context transition is executed within an iterator with an active row context. Investigate whether you can move a calculation outside the iteration by storing it in a variable, or if you can reduce the cardinality of the iteration.                                                                                                                                                                                                                   | `VAR _ExchangeRate = [ExchangeRate]`<br>`RETURN SUMX ( Sales, Sales[Line Amount] * _ExchangeRate )`                                                                                                                        |
| Function replace FIRSTDATE/LASTDATE   | When FIRSTDATE or LASTDATE functions are used to return a scalar value instead of a table, the same result can be obtained in a more efficient way by using MIN or MAX on the column.                                                                                                                                                                                                                                                                       | `VAR firstDate = MIN( Sales[Order Date] )`                                                                                                                                                                                |

